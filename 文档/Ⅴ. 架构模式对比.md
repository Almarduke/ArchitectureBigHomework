## Ⅴ. 架构模式对比

### 5.1 综述

CS架构更适合中小型系统的开发，在低并发的场景下拥有更高的性能，而微服务架构更适合大型系统的开发，在高并发场景下拥有更高的性能，而且可用性好于CS架构。

CS架构复杂度低，前期开发成本较小，但后期维护成本更高，而微服务架构复杂度高，前期开发成本昂贵，但是后期维护成本低，而且拥有更好的可伸缩性和可扩展性，可以灵活的增加或移除服务。

### 5.2 性能

| 微服务架构                                                   | CS架构                                                       |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 低并发情况下，服务间需要通信，会受到网络延迟，消息传递等影响，降低性能 | 低并发情况下，通过共享内存访问进行通信，性能更好             |
| 高并发情况下，可以为单个服务增加计算资源，其他服务的性能不会受到影响，性能更好 | 高并发情况下，单台服务器的存储能力和处理能力会成为约束性能的瓶颈，而且单个功能会消耗更多的计算资源，降低其他功能的性能 |



### 5.3 可用性

| 微服务架构                                                   | CS架构                                     |
| ------------------------------------------------------------ | ------------------------------------------ |
| 分离的服务有更好的容错性，正常情况下一台服务器宕机不会使整个系统崩溃，有更好的可用性 | 错误会对整个应用的稳定产生影响，可用性更低 |



### 5.4 安全性

| 微服务架构                                                   | CS架构                                                 |
| ------------------------------------------------------------ | ------------------------------------------------------ |
| 分离的服务开放了更多的端口，增大了攻击面，部署安全措施更复杂 | 模块集中，攻击面小，容易部署安全措施                   |
| 外界与服务的通信可通过API网关进行身份认证，服务间通信可通过加密协议验证身份，安全性高 | 客户端与服务端的通信可通过拦截器进行身份认证，安全性高 |



### 5.5 成本

| 微服务架构                                                   | CS架构                                           |
| ------------------------------------------------------------ | ------------------------------------------------ |
| 结构复杂，开发成本更高                                       | 结构简单，复杂度低，开发的成本更低               |
| 服务之间相互分离，容易对某个服务进行修改和重新部署，维护成本较低 | 模块之间耦合度更高，维护成本更高                 |
| 低并发量需要更多的计算资源，硬件成本更高                     | 低并发量需要更少的计算资源，硬件成本更低         |
| 高并发量下，可以对单个服务进行伸缩，硬件成本更低             | 高并发量下，需要对整个应用进行伸缩，硬件成本更高 |



### 5.6 可测试性

| 微服务架构                 | CS架构 |
| -------------------------- | ------ |
| 测试前需要确认依赖的服务，降低了可测试性 | 将应用整体打包，更加容易测试 |

### 5.7 结论

考虑到高并发、高可用的需求，相较于CS架构，微服务架构的表现更好，因此最终选择微服务架构。